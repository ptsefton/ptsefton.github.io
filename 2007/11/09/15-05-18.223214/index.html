
<html>
<head>
    <title>ptsefton.com :: ICE as a blog editor</title>
<style>
.header {
  background-color: #ff00ff;
  border-color: #b72bc0;
  color: #ffff00;
  padding-top: 12pt;
  padding-bottom: 12pt;
  font-family: monospace;
}




/* unvisited link */
a:link {
    color: #FF00FF;
}

.header a:link {
    color: #FFFF00;
    text-decoration: none; 
}

button {
    color: #ffff00;
    background-color: #ff00ff;
    font-family: monospace;
}

/* visited link */
a:visited {
    color: #FF00AA;
}

.header a:visited {
    color: #FFFF00;
}

h1, h2 {
    color: # FF00FF
}

/* mouse over link */
a:hover {
    color: #FF00AA;
}

/* selected link */
a:active {
    color: #0000FF;
}

a {
    text-decoration: none; 
}

img {
    max-width: 100%;
    display: block;
    margin-left: auto;
    margin-right: auto;
}
section img {
    width: 100%
}

td, th {
    padding-top: 20px;
    padding-right: 20px;
    vertical-align: top;
    text-align: left;
}

.content {
	font-family: Verdana, system-ui, Helvetica, sans-serif;
    line-height: 1.8em;
    }


.caption {
    text-align: center;
    background-color: rgba(255, 0, 255, 0.2); 
    padding-left: 5%;
    padding-right: 5%;
    padding-top: 2%;
    padding-bottom: 2%;
}

blockquote {
    font-style: italic;
    font-weight: bold;
    color: #FF00FF;

    background-color: rgba(255, 255, 0, 0.2); 
    padding-left: 5%;
    padding-right: 5%;
    padding-top: 2%;
    padding-bottom: 2%;
}


@media  screen and (min-width:  900px) {
    .content, .header {
        width: 60%;
        padding-left: 20%;
        padding-right: 30%;
    }
    .row {
    display: grid;
    grid-template-columns: 75% 25%;
}
    
}

@media  screen and (min-width: 1200px) {
    .content, .header {
        width: 55%;
        padding-left: 20%;
        padding-right: 30%;
    }
    .row {
        display: grid;
        grid-template-columns: 75% 25%;
}
    
}


.date {
      font-style: italic;
}

.cat p {
        line-height: 1em;
}

</style>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-898010-1', 'auto');
  ga('send', 'pageview');
</script>
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6JNHBJL67Q"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-6JNHBJL67Q');
</script>

<body>
    <div class="header">
        <h2><a href="/">[ptsefton.com]</a> | <a href="/Pages/cv.html"> [CV & Bio] </a></h2>
    </div>


    <div class="content">
        <h1> 
        ICE as a blog editor 
        </h1>
        <h2>2007-11-09 </h2>

        <div>
<p><a href="/blog/2007/11/09/15-05-18.223214/100.pdf">View this page as PDF</a></p>
<p>I noticed yesterday another <a href="http://wwmm.ch.cam.ac.uk/blogs/murrayrust/?p=797">frustrated
aside</a> from Peter
Murray Rust embedded in a post about chemistry and e-science:</p>
<blockquote>
<p>[Note: I will continue to try to format the code - Wordpress makes it
very difficult]</p>
</blockquote>
<p>Also yesterday I wrote <a href="http://ptsefton.com/blog/2007/11/08/13-15-08.503110">about how we are breaking ICE up into more
digestible pieces</a>,
one of which is the ability to post to a weblog using Atompub. Daniel de
Byl has just posted a demo <a href="http://ice.usq.edu.au/presentations/demos/ooo_to_wordpress.htm">using OpenOffice.org Writer to publish a
nicely formatted blog post to
WordPress</a>.</p>
<p>And today a <a href="http://ptsefton.wordpress.com/2007/11/09/ice-as-a-blog-editor/">supportive reply from
PMR</a> to
my post with a poem in it! Thing do indeed take time, I've been at this
since 1996. I think we're getting there now, though.</p>
<p>I thought I'd try out the new ICE services using one of Peter's posts
and see what happens. I think that the ICE toolbar in Writer could help
transcend the formatting problems with WordPress and we could look at
doing interesting stuff like <a href="http://ice.usq.edu.au/presentations/demos/try_ice_2x_for_wp.htm">CML
integration</a>.</p>
<p>Here's his post (embedded in mine as a blockquote):</p>
<blockquote>
<p><a href="http://wwmm.ch.cam.ac.uk/blogs/murrayrust/?p=797"><strong>CrystalEye: using the
harvester</strong></a></p>
<p>Jim Downing has written a harvester for CrystalEye. I thought I would
have a try and see if I could iterate through all the entries and
extract the temperature of the experiment. This is where XML really
starts to show its value over legacy formats. Jim<span
class="spCh spChx2019">’</span>s iterator reads each entry and copies
it to a file; I decided to read the entry as an XML document, search
for the temperature using XQuery and announce it. It<span
class="spCh spChx2019">’</span>s simple enough that I thought I could
do it while watching Liverpool (I used to live on Merseyside).
Unfortunately (or fortunately) the torrent of goals distracted me so
it had to wait till today.</p>
<p>The temperature is described in the IUCr dictionary and held in CML as
(example):</p>
<p>293.0</p>
<p>So this is trivially locatable by XQuery (with local-name() and
@dictRef):</p>
<p>// iterate through all entries</p>
<p>for (DataEntry de : doc.getDataEnclosures()) {</p>
<p>if (downloaded &gt;= maxHarvest) {</p>
<p>return downloaded;</p>
<p>}</p>
<p>InputStream in = null;</p>
<p>try {</p>
<p>in = get(de.url);</p>
<p>// standard XOM XML parsing, creates a</p>
<p>Element rootElement = new Builder().build(in).getRootElement();</p>
<p>// standard xquery</p>
<p>Nodes nodes = rootElement.query(</p>
<p>&quot;.//*[local-name()='scalar'&quot;+</p>
<p>and @dictRef='iucr:_cell_measurement_temperature']&quot;);</p>
<p>// if there is a temperatute extract the value</p>
<p>String temp = (nodes.size() == 0) ? &quot;no temp given&quot; : nodes.get(0).getValue();</p>
<p>System.out.println(&quot;temperature for &quot;+rootElement.getAttributeValue(&quot;id&quot;)+&quot;: &quot;+temp);</p>
<p>downloaded++;</p>
<p>} catch (Exception e) {</p>
<p>e.printStackTrace();</p>
<p>} finally {</p>
<p>IOUtils.closeQuietly(in);</p>
<p>}</p>
<p>}</p>
<p>and here<span class="spCh spChx2019">’</span>s the output:</p>
<p>1625 [main] DEBUG uk.ac.cam.ch.wwmm.crystaleye.client.Harvester  - Getting http://wwmm.ch.cam.ac.uk/crystaleye/summary/rsc/ob/2007/22/data/b712503h/b712503hsup1_pob0401m/b712503hsup1_pob0401m.complete.cml.xml</p>
<p>temperature for rsc_ob_2007_22_b712503hsup1_pob0401m: 115.0</p>
<p>2297 [main] DEBUG uk.ac.cam.ch.wwmm.crystaleye.client.Harvester  - Getting http://wwmm.ch.cam.ac.uk/crystaleye/summary/rsc/ob/2007/22/data/b710487a/b710487asup1_ljf130/b710487asup1_ljf130.complete.cml.xml</p>
<p>temperature for rsc_ob_2007_22_b710487asup1_ljf130: 150.0</p>
<p>etc.</p>
<p>It will take the best part of the day to iterate through the entries,
but remember that CrystalEye is not a database. We are converting it
to RDF (and anyone interested can also do this) when it can be
searched in a trivial amount of time and with much more complex
questions. (Remember that CrystalEye was not originally designed as a
public resource). Until then anyone who wishes to use CrystalEye a lot
would do best to download the entries and build their own index.</p>
<p>[Note: I will continue to try to format the code - Wordpress makes it
very difficult]</p>
</blockquote>
<p>Easy enough to do in ICE apart from the slightly clunky way quoting
works. We really need the ability to import HTML properly formatted as a
blockquote. This would be very important for PMR, as he likes to quote
big chunks. In HTML all you do is wrap <code>&lt;blockquote&gt;</code> tags around the
source for the quote and you're done. In ICE you have to imply the quote
by marking the first paragraph as <code>bq1</code> style using our easy-to-click
toolbar buttons, then indent the subsequent paragraphs appropriately
with the indent button. We'll work on automating that but it's not that
bad even now.</p>
<p>I considered using <a href="http://weblogtoolscollection.com/archives/2007/06/16/css-for-code-wrap-long-lines/">this
tip</a>
to change my CSS so that stuff in <code>&lt;pre&gt;</code> tags wraps but on the test
site I would have to pay to change the CSS. The theme I'm using uses
this: <code>pre {overflow: auto;}</code> . PMR has used <code>&lt;code&gt;</code> inside a
paragraph. Not sure what the solution would be there but maybe the same
CSS would help.</p>
<p>You can see a <a href="http://ptsefton.wordpress.com/2007/11/09/ice-as-a-blog-editor/">draft version of this here post on my test
blog</a>.</p>
<p>If you want to try this out and blog to WordPress from OpenOffice.org
then see <a href="http://ice.usq.edu.au/presentations/demos/try_ice_2x_for_wp.htm">the
instructions</a>
that Daniel has put up on the ICE site and remember this is
bleeding-edge alpha-quality Windows-only software at this stage.
Remember also to actually read the instructions. The URL to use for
WordPress is really important, for example.</p>
</div>

    </div><script src="https://utteranc.es/client.js"
            repo="ptsefton/blog-comments"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>  
    </script></body>
</html>