
<html>
<head>
    <title>ptsefton.com :: NeCTAR Über Dojo, Reproducible Research (UWS eResearch team in Cloud Land II)</title>
<style>
.header {
  background-color: #ff00ff;
  border-color: #b72bc0;
  color: #ffff00;
  padding-top: 12pt;
  padding-bottom: 12pt;
  font-family: monospace;
}




/* unvisited link */
a:link {
    color: #FF00FF;
}

.header a:link {
    color: #FFFF00;
    text-decoration: none; 
}

button {
    color: #ffff00;
    background-color: #ff00ff;
    font-family: monospace;
}

/* visited link */
a:visited {
    color: #FF00AA;
}

.header a:visited {
    color: #FFFF00;
}

h1, h2 {
    color: # FF00FF
}

/* mouse over link */
a:hover {
    color: #FF00AA;
}

/* selected link */
a:active {
    color: #0000FF;
}

a {
    text-decoration: none; 
}

img {
    max-width: 100%;
    display: block;
    margin-left: auto;
    margin-right: auto;
}
section img {
    width: 100%
}

td, th {
    padding-top: 20px;
    padding-right: 20px;
    vertical-align: top;
    text-align: left;
}

.content {
	font-family: Verdana, system-ui, Helvetica, sans-serif;
    line-height: 1.8em;
    }


.caption {
    text-align: center;
    background-color: rgba(255, 0, 255, 0.2); 
    padding-left: 5%;
    padding-right: 5%;
    padding-top: 2%;
    padding-bottom: 2%;
}

blockquote {
    font-style: italic;
    font-weight: bold;
    color: #FF00FF;

    background-color: rgba(255, 255, 0, 0.2); 
    padding-left: 5%;
    padding-right: 5%;
    padding-top: 2%;
    padding-bottom: 2%;
}


@media  screen and (min-width:  900px) {
    .content, .header {
        width: 60%;
        padding-left: 20%;
        padding-right: 30%;
    }
    .row {
    display: grid;
    grid-template-columns: 75% 25%;
}
    
}

@media  screen and (min-width: 1200px) {
    .content, .header {
        width: 55%;
        padding-left: 20%;
        padding-right: 30%;
    }
    .row {
        display: grid;
        grid-template-columns: 75% 25%;
}
    
}


.date {
      font-style: italic;
}

.cat p {
        line-height: 1em;
}

</style>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-898010-1', 'auto');
  ga('send', 'pageview');
</script>
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6JNHBJL67Q"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-6JNHBJL67Q');
</script>

<body>
    <div class="header">
        <h2><a href="/">[ptsefton.com]</a> | <a href="/Pages/cv.html"> [CV & Bio] </a></h2>
    </div>


    <div class="content">
        <h1> 
        NeCTAR Über Dojo, Reproducible Research (UWS eResearch team in Cloud Land II) 
        </h1>
        <h2>2012-10-08 </h2>

        <article itemscope="itemscope" itemtype="http://schema.org/ScholarlyArticle">
<section>
<h1></h1>
<p>Alf (Andrew) Leahy and I were recently in Melbourne for the <a href="http://melbourne-uberdojo.eventbrite.com/">NeCTAR Über
Dojo event</a>.</p>
<blockquote>
<p>By coming to this two day event you will be able to go back to your
institution with a signed certificate showing that you've been 'black
belted' as a Cloud expert, specifically we'll train and qualify you in
using the following tools and data in the Cloud:</p>
<ul>
<li>
<p>How to use image management tools for production level VM
management on the Cloud, i.e. Puppet or Chef</p>
</li>
<li>
<p>How to use libraries to access storage data APIs, e.g. SWIFT/S3,
NFS, Object Store, etc.</p>
</li>
<li>
<p>We'll also use this event to get you the experts to tell us what
new features we need for all these new toys (I mean infrastructure
;-)</p>
</li>
</ul>
</blockquote>
<p>The climax of this thing was an Iron Chef-style challenge. This is an
initial rough post about our two hour hack (which we cleaned up over a
few more hours post-event). Andrew will write up the event for the UWS
eResearch blog. Thanks to Remko Duursma and Craig Barton for letting use
their code and data for the demo.</p>
<section itemscope itemtype="http://purl.org/ontology/bibo/Slide">
<h2>Background: HIE* researchers use <a href="http://www.r-project.org/">R</a></h2>
<p><img src="/wp-content/uploads/2012/10/wpid-NeCTAR_uber_Dojo.docx.htm_NeCTAR_uber_Dojo.docx_filesimage002.jpg" alt=""></p>
<p>*Hawkesbury Institute for the Environment</p>
</section>
<section itemscope itemtype="http://purl.org/ontology/bibo/Slide">
<h2>Meet Remko</h2>
<p><img src="/wp-content/uploads/2012/10/wpid-NeCTAR_uber_Dojo.docx.htm_NeCTAR_uber_Dojo.docx_filesimage004.jpg" alt=""></p>
<p><a href="http://www.uws.edu.au/hie/people/researchers/doctor_remko_duursma">http://www.uws.edu.au/hie/people/researchers/doctor_remko_duursma</a></p>
</section>
<section itemscope itemtype="http://purl.org/ontology/bibo/Slide">
<h2>And Craig</h2>
<p><img src="/wp-content/uploads/2012/10/wpid-NeCTAR_uber_Dojo.docx.htm_NeCTAR_uber_Dojo.docx_filesimage006.jpg" alt=""></p>
<p><a href="http://www.uws.edu.au/hie/people/admin_and_technical_staff/dr_craig_barton">http://www.uws.edu.au/hie/people/admin_and_technical_staff/dr_craig_barton</a></p>
</section>
<section itemscope itemtype="http://purl.org/ontology/bibo/Slide">
<h2>They run R to clean data &amp; model stuff…</h2>
<p><img src="/wp-content/uploads/2012/10/wpid-NeCTAR_uber_Dojo.docx.htm_NeCTAR_uber_Dojo.docx_filesimage008.jpg" alt=""></p>
</section>
<section itemscope itemtype="http://purl.org/ontology/bibo/Slide">
<h2>This R Notebook shows code and output together in HTML</h2>
<p><img src="/wp-content/uploads/2012/10/wpid-NeCTAR_uber_Dojo.docx.htm_NeCTAR_uber_Dojo.docx_filesimage010.jpg" alt=""></p>
</section>
The night before the challenge I asked Remko and Craig if we could use
some sample data and R code:
<blockquote>
<p>Andrew (Alf) and I are at a workshop in Melbourne - I was wondering if
I can use this as a demo tomorrow - ie it will appear on screen but
not be made available over the net. The short notice is because the
idea has only emerged today.</p>
<p>The thing we'd be demoing would be to _simulate_ the following:</p>
<ul>
<li>
<p>Data set + scripts like the attached is sitting in a web based
repository.</p>
</li>
<li>
<p>Repository offers user the opportunity to download the
package OR - Get an interactive R-Studio shell where they can
re-run the data</p>
<ul>
<li>
<p>Use clicks a &quot;see with interactive shell&quot; link.</p>
</li>
<li>
<p>Our server:</p>
<ul>
<li>
<p>Fires up a virtual server in the cloud</p>
</li>
<li>
<p>Installs the server version of R-Studio</p>
</li>
<li>
<p>Creates a user account</p>
</li>
<li>
<p>Pushes the data package onto the new server</p>
</li>
<li>
<p>Unpacks the package</p>
</li>
<li>
<p>Sets up R-studio to run Knitr on the main script to create
HTML</p>
</li>
<li>
<p>sends a link to the R-Studio to the user (maybe by email
cos this might take a few minutes)</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>The user can see the plots etc, and will have access to the R
environment to tweak things</p>
</li>
</ul>
</blockquote>
<section itemscope itemtype="http://purl.org/ontology/bibo/Slide">
<h2>Our idea…</h2>
<p><img src="/wp-content/uploads/2012/10/wpid-NeCTAR_uber_Dojo.docx.htm_NeCTAR_uber_Dojo.docx_filesimage012.png" alt=""></p>
</section>
<section itemscope itemtype="http://purl.org/ontology/bibo/Slide">
<h2>Remko’s reponse</h2>
<blockquote>
<p>That sounds fantastic. Please go ahead! Wait actually those are
Craig's data :)**</p>
<p>&gt;* Get an interactive R-Studio shell where they can re-run the data</p>
<p>YES that is perfect!</p>
<p>greetings</p>
<p>remko</p>
</blockquote>
<p>**Craig gave us the go-ahead as well</p>
</section>
<section itemscope itemtype="http://purl.org/ontology/bibo/Slide">
<h2>Initial quick and dirty demo approach</h2>
<p>We have written a simple CGI web script in Python which simulates a
repository, with the capacity to orchestrate the below:</p>
<ul>
<li>
<p>Create a new NeCTAR machine using Python with the Boto library</p>
</li>
<li>
<p>Connect via SSH and install R-Studio and dependencies, and make a
user account</p>
<p>TODO: Use Chef for the initial server build – we learned about Chef
on Monday but not enough to be able to create a new ‘recipe’ in an
hour or so.</p>
<p>TODO: Use a snapshot image so users don’t have to wait ten minutes
for a machine to start up and install all the prerequisites</p>
</li>
<li>
<p>Copy the sample data set onto the VM</p>
<p>TODO:  Use the cloud object storage so the data set is near to the
VM (We know how, just didn’t have time)</p>
<p>TODO: See if we can get R-Studio to launch with an R Notebook by
default and log-in automatically</p>
</li>
</ul>
</section>
<section itemscope itemtype="http://purl.org/ontology/bibo/Slide">
<h2>Why is this cool?</h2>
<ul>
<li>
<p><strong>Our researcher-colleagues like the idea</strong></p>
</li>
<li>
<p>It uses the cloud to solve a set of real problems*:</p>
<ol>
<li>
<p>Makes it easy for ‘data shoppers’ to evaluate data sets</p>
</li>
<li>
<p>Potentially enables research outputs to be re-run in an exact
environment for real reproducible workflows (Remko notes that
you really need the exact R library versions sometimes, this
could be an option.)</p>
</li>
</ol>
</li>
</ul>
<p>*Assuming a real implementation</p>
</section>
<section itemscope itemtype="http://purl.org/ontology/bibo/Slide">
<h2>Screenshot : Script creating a virtual server</h2>
<p><img src="/wp-content/uploads/2012/10/wpid-NeCTAR_uber_Dojo.docx.htm_NeCTAR_uber_Dojo.docx_filesimage014.jpg" alt=""></p>
</section>
<section itemscope itemtype="http://purl.org/ontology/bibo/Slide">
<h2>Screenshot: our script Installs R-Studio*</h2>
<p><img src="/wp-content/uploads/2012/10/wpid-NeCTAR_uber_Dojo.docx.htm_NeCTAR_uber_Dojo.docx_filesimage016.jpg" alt=""></p>
<p>*This process is really too slow to do on-demand, we should launch from
a pre-built snapshot. And the automation here is really hacky and crude
– it would be better to do it using something like Chef but that’s not a
one-day project if you have never used it before.</p>
</section>
<section itemscope itemtype="http://purl.org/ontology/bibo/Slide">
<h2>Result – an RStudio Server…</h2>
<p><img src="/wp-content/uploads/2012/10/wpid-NeCTAR_uber_Dojo.docx.htm_NeCTAR_uber_Dojo.docx_filesimage018.jpg" alt=""></p>
<p>TODO: Automate the login by passing some kind of token?</p>
</section>
<section itemscope itemtype="http://purl.org/ontology/bibo/Slide">
<h2>With a data-set pre-loaded*</h2>
<p><img src="/wp-content/uploads/2012/10/wpid-NeCTAR_uber_Dojo.docx.htm_NeCTAR_uber_Dojo.docx_filesimage020.jpg" alt=""></p>
<p>*We have not automated the installation of Knitr – so no R Notebook
yet, but the code is runnable, and will spit out plot-images</p>
</section>
<section itemscope itemtype="http://purl.org/ontology/bibo/Slide">
<h2>Show me the code</h2>
<p>The code we produced is demo quality hack-day code. This is not
something you’d use in real life but we’re releasing it on <a href="http://code.google.com/p/uws-eresearch/source/browse/#svn%2Ftrunk%2Fnectar-cloud%2Frstudio">Google
Code</a>
as an example and so we can remember where to start when we come back to
this and try to do it properly, maybe as part of the data capture
project at the <a href="http://eresearch.uws.edu.au/blog/projects/data-capture-for-climate-change-and-energy-research/">Hawkesbury Institute for the
Environment</a>.</p>
</section>
<p>Copyright<span class="apple-converted-space">  </span>Peter Sefton and
Andrew Leahy, 2012. Licensed under<span
class="apple-converted-space"> </span>Creative Commons Attribution-Share
Alike 2.5<span class="apple-converted-space"> </span>Australia.
&lt;<a href="http://creativecommons.org/licenses/by-sa/2.5/au/">http://creativecommons.org/licenses/by-sa/2.5/au/</a>&gt;</p>
</section>
</article>

    </div><script src="https://utteranc.es/client.js"
            repo="ptsefton/blog-comments"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>  
    </script></body>
</html>